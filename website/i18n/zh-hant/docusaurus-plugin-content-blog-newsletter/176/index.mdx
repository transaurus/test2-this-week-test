---
slug: /176
title: "This Week In React #176: useActionState, React Compiler, Million Lint, TanStack, Generative UI, Vinxi, Remix i18n, Next.js security, Typesafe Router, Shopify RN perf, RCTRootViewFactory, iOS Live Activities, Uni Stack, TypeScript, Parcel..."
authors: [slorber, bndkt]
date: 03-06-2024
---

大家好！

本週資訊量龐大難以概述，有太多值得關注的新消息，我實在難以抉擇哪些該重點強調。

尤其值得注意的是，我們窺見了即將取代令人困惑的 `useFormState` 的全新 React 核心鉤子，現在連 React Native 開發者也能使用了！

<!-- truncate -->

**💡 [在 Twitter 上查看本週精選](https://slo.im/thread) - 視覺化呈現 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 贊助商 {#sponsor1}

[![Axiom - Vercel 應用最強大的日誌平台](/emails/issues/171/axiom.jpg)](https://axiom.co/vercel)

**[Axiom - Vercel 應用最強大的日誌平台](https://axiom.co/vercel)**

😴 安心入眠吧！Axiom 為 Vercel 專案提供的零配置可觀測性，讓您高枕無憂。

- 使用 Axiom 預建儀表板綜覽所有 Vercel 日誌與效能指標，點擊即可深入特定專案與部署版本，並透視函式執行效能。
- [next-axiom](https://github.com/axiomhq/next-axiom) 讓您無需特殊配置，就能從 Next.js 專案的任何位置（客戶端、邊緣或伺服器端）發送日誌與事件。
- 輕鬆從程式碼直接發送結構化日誌，並與 Vercel 日誌進行整合分析。

Axiom 高效捕捉 100% 事件數據，您無需擔憂取樣率或保留期限，再也不用猜測用戶的實際體驗。

**PS**: [I use it myself to monitor the newsletter signups](https://twitter.com/sebastienlorber/status/1528666563452317696) 😉

---

## ⚛️ React {#react}

[![React 核心 PR - 全新 useActionState 鉤子](/emails/issues/176/useActionState.jpg)](https://github.com/facebook/react/pull/28491)

**[React 核心 PR - 全新 useActionState 鉤子](https://github.com/facebook/react/pull/28491)**

事實證明 useFormState 鉤子容易造成混淆，且原本就不該僅限表單使用。React 團隊正透過全新核心鉤子來解決此問題：

- 將 `useFormState` 更名為 `useActionState`
- 在返回的元組中新增 pending 狀態
- 將鉤子移至 `react` 套件包

從 `react-dom` 移至 `react` 意味著其他渲染器（如 React Native）現在也能使用它。PR 中還提到其他優勢，例如「部分漸進增強」功能，同時也記載了新的注意事項。

---

- 💸 [Secure your documents with PDF Redaction. Discover how to protect sensitive information in PDFs using React. Visit our blog to learn more.](https://apryse.com/blog/pdf-redaction-using-react?utm_source=this%20week%20in%20react&utm_medium=newsletter3)
- 🐦 [React 19 != React Compiler](https://twitter.com/sebastienlorber/status/1764950877620654474): The React Labs post is a bit ambiguous and misled many of us, so let’s clarify. The compiler will likely come after the React 19.0 release as a separate project, and there’s a good chance it will initially be released as a Babel/TypeScript plugin. The internals are decoupled through, so it shouldn’t take long to adapt it it to Rust.
- 🐦 [TanStack Start preview](https://twitter.com/tannerlinsley/status/1765120904370307438): Tanner works on a TanStack Start full-stack framework based on Vinxi and TanStack Router. This preview shows he’s migrating his own TanStack site to it.
- 📜 [Vercel - Introducing AI SDK 3.0 with Generative UI support](https://vercel.com/blog/ai-sdk-3-generative-ui): With the AI SDK 3.0 and thanks to React Server Components, you can now stream UI components directly from LLMs. Super impressive demos!
- 📜 [Secure statically rendered paid content in Next.js (with the App Router)](https://www.ericburel.tech/blog/static-paid-content-app-router): Shows that using Next.js layouts for authentication is not super secure, and the protected content can still leak through the RSC endpoint. Suggests using a middleware instead.
- 📜 [Internationalization with Remix](https://remix.run/blog/remix-i18n): Goes back to i18n fundamentals, and then detail various i18n solutions you can set up within Remix. Optional route segments can help you use localized sub-directories.
- 📜 [Did you know you can write your own typesafe React router in 500 lines?](https://sinja.io/blog/build-typesafe-react-router-from-scratch): A great comprehensive article that might give you a better understanding of how existing routers work. Also great to learn about advanced TypeScript type-level programming techniques.
- 📜 [Streaming HTML out of order without JavaScript](https://lamplightdev.com/blog/2024/01/10/streaming-html-out-of-order-without-javascript/): This super interesting demo shows we don’t need JavaScript to stream out-of-order HTML chunks, and yet render them in the correct order. All you need is Declarative Shadow DOM and slots. It will be interesting to see if RSC streaming + Suspense could leverage that technique in the future instead of inlining JavaScript.
- 📜 [Simple RSC With Vinxi](https://www.brenelz.com/posts/simple-rsc-with-vinxi/): The Vinxi SDK helps you create your own full-stack framework, and it even has a plugin for React Server Components support!
- 📜 [Million.js - Blocks with noSlot Mode](https://million.dev/blog/block-noSlot): the Million compiler might wrap your components with `<slot>` elements, which might cause issues (styling). This introduces a new experimental `noSlot` mode..
- 📜 [How to add Monaco to a Next.js app to enable custom user workflows](https://deno.com/blog/monaco-nextjs): Interesting tutorial that also shows how to deploy untrusted user code to Deno.
- 📜 [Conceptual Model of React and RSC](https://ondrejvelisek.github.io/conceptual-model-of-react-and-rsc/): Reflects around the UI=f(state) formula in interesting ways, and concludes RSC kind of breaks the original model.
- 📜 [Why React Server Components Are Breaking Builds to Win Tomorrow](https://www.builder.io/blog/why-react-server-components)
- 📜 [The End Of My Gatsby Journey](https://www.smashingmagazine.com/2024/03/end-of-gatsby-journey/)
- 📜 [React Admin March 2024 Update](https://marmelab.com/blog/2024/03/05/react-admin-march-2024-update.html)
- 📦 [Million Lint - public beta](https://million.dev/blog/lint): A VSCode extension that helps you keep your React code fast thanks to dynamic analysis. Much simpler to use than React Devtools flame graphs. There will be an additional AI-based Lint++ paid service built on top to suggest you possible performance improvements.
- 📦 [react-unforget - A compiler for automatic optimization of React apps](https://github.com/mohebifar/react-unforget): After Forgetti, this is another new alternative React compiler coming from the community. See also 🐦 [Joe Savona’s feedback](https://twitter.com/en_JS/status/1763593971224494106).
- 📦 [Remix 2.8 - Pass resolved viteConfig to buildEnd hook](https://remix.run/docs/en/main/start/changelog#v280)
- 📦 [React Query 5.25 - skipToken, typesafe query disabling](https://github.com/TanStack/query/releases/tag/v5.25.0)
- 📦 [TanStack Router 1.18 - route groups](https://github.com/TanStack/router/releases/tag/v1.18.0)
- 📦 [Starlight 0.21 - New UI components: Steps, FileTree](https://starlight.astro.build/guides/components/)
- 📦 [Storybook 8.0 RC - v8 is officially stable enough to be used in production](https://github.com/storybookjs/storybook/releases/tag/v8.0.0-rc.0)
- 📦 [Onborda - Onboarding wizard flow for Next.js powered by Framer Motion](https://github.com/uixmat/onborda)
- 📦 [Input-OTP - One-time password input component for React](https://input-otp.rodz.dev/)
- 📦 [Panda 0.33](https://github.com/chakra-ui/panda/discussions/2274)
- 📦 [UVCanvas - React component library for beautifully shaded canvas](https://uvcanvas.com)
- 🎥 [Jack Herrington - Is Tanstack Router Better Than React-Router?](https://www.youtube.com/watch?v=qOwnQJOClrw)
- 🎥 [Theo - How Shadcn/ui Actually Works](https://www.youtube.com/watch?v=AqmMx_JidGo)

<SubscribeFormEmbed placement="middle" />

---

## 💸 贊助商 {#sponsor2}

[![需要的不只是登入框？](/emails/issues/176/clerk.jpg)](https://clerk.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=middleware&utm_content=03-06-24)

**[需要的不只是登入框？](https://clerk.com/?utm_source=thisweekinreact&utm_medium=newsletter&utm_campaign=middleware&utm_content=03-06-24)**

Clerk 簡化了 React 應用的身份驗證與用戶管理，確保現代化網頁能快速完成設置。

體驗 Clerk 的強大優勢：

- 💅 預建置的登入、註冊、用戶檔案和組織管理 UI 元件。可使用任何 CSS 庫自訂並部署在您的網域
- 📦 支援 React、React Native、Next.js、Redwood、Remix 等框架的 SDK
- ⚡ 與 Firebase、Supabase、Convex 等後端即服務（BaaS）供應商整合
- 🎁 開箱即用的用戶管理、社群登入、魔法連結、多因素驗證等功能

立即探索 Clerk 的[快速入門指南與教學](https://clerk.com/docs/quickstarts/overview?utm_source=sponsorship&utm_medium=newsletter&utm_campaign=thisweekinreact&utm_term=02-28-24)，快速啟動您的專案 🚀

---

## 📱 React-Native {#react-native}

本專欄現由 [Benedikt](https://twitter.com/bndkt) 共同撰寫。歡迎透過電子郵件或 [Twitter](https://twitter.com/bndkt) 提供您的意見！

[![提升 Shopify 應用程式效能](/emails/issues/176/shopify.jpg)](https://shopify.engineering/improving-shopify-app-s-performance)

**[提升 Shopify 應用程式效能](https://shopify.engineering/improving-shopify-app-s-performance)**

Shopify 長期以來都是 React Native 的支持者。但他們注意到自從遷移到 React Native 後，應用程式效能有所下降。他們沒有歸咎技術堆疊，而是著手進行效能優化。成果不言自明：應用程式啟動速度提升 44%，畫面載入時間減少 59%。以下是他們採取的部分措施摘要（提示：FlashList 在其中扮演重要角色）。詳細內容請參閱其精彩的總結文章：

- 初始階段僅渲染螢幕可見內容（主畫面尤為關鍵）
- 所有畫面均採用列表形式建構（基於 FlashList）
- 使用 inlineRequires
- 批次處理狀態變更
- 優化快取機制

極具洞見且成效卓著。期待 Shopify 團隊持續分享細節，或許我們將看到他們在此過程中開發的部分功能開源釋出？

---

- 💸 [React Universe Conf 結合 React Native EU 精華並升級議程內容。3月7日前搶購最低價門票](https://www.reactuniverseconf.com/?utm_campaign=React_Universe_Conf&utm_source=email&utm_content=This_Week_in_React)
- 👀 [PR - RCTRootViewFactory](https://github.com/facebook/react-native/pull/42263)：簡化 iOS 棕地整合，免除舊架構/新架構/橋接/無橋接組合的困擾
- 🐦 [在 RN 應用中實現跨應用檔案拖放功能](https://x.com/alihdjr/status/1764393524940673529)
- 📖 [visionOS 文件 - 整合至現有專案](https://callstack.github.io/react-native-visionos-docs/docs/guides/integrate-into-existing-projects/)
- 📜 [Expo - 透過自訂建置編排進階工作流程](https://expo.dev/blog/orchestrate-advanced-workflows-with-custom-builds)：自訂建置允許在 Expo 建置前後執行腳本（bash 或 JS），例如執行 E2E 測試、發送團隊通知等
- 📜 [iOS Live Activities 與 React Native - 運用最新 iOS 功能顯示即時資料無需開啟應用](https://www.reactnative.university/blog/live-activities-unleashed)：更多應用應該採用 Live Activities！RN 開發者需克服 Swift 開發門檻，本三部曲詳解實作步驟
- 📜 [React Native 錯誤邊界 - 功能、部分與伺服器](https://www.reactnative.university/blog/react-native-error-boundaries)：錯誤邊界仍被低估，每個 RN 應用都應至少設置一處（理想多處），本文解析原因與方法
- 📜 [透過原生加密庫提升速度與安全性](https://www.callstack.com/blog/increase-speed-and-security-with-native-crypto-libraries)
- 📜 [Morrow 解讀 2023 React Native 狀態報告](https://www.themorrow.digital/blog/our-summary-of-the-state-of-react-native-2023-report)
- 📦 [Intercom-react-native 6.5 - 現支援 Expo 設定插件](https://github.com/intercom/intercom-react-native/releases/tag/6.5.0)
- 📦 [Uni Stack - 整合 Expo/Prisma/tRPC 的 RN 入門套件](https://www.uni-stack.dev/)
- 📦 [Expo-foreground-actions - 啟動用戶切換應用後仍在寬限期執行的任務](https://github.com/Acetyld/expo-foreground-actions)
- 📦 [React Native 0.74.0 RC 2](https://github.com/facebook/react-native/releases/tag/v0.74.0-rc.2)
- 🎙️ [RNR 290 - 與 Bartłomiej Bukowski 探討 React Native 現況調查](https://reactnativeradio.com/episodes/the-state-of-react-native-survey-with-bartomiej-bukowski)
- 🎙️ [Rocket Ship 32 - 從破產教師到軟體工程師之路 ft. Zach Taylor](https://podcast.galaxies.dev/episodes/032-from-broke-teacher-to-software-engineer-with-zach-taylor)
- 🎥 [Simon Grimm - 用 React Native 打造兒童繪圖應用](https://www.youtube.com/watch?v=G5TjXRHoEno)
- 🎥 [notJust Dev - 用 React Native 建置跨平台部落格](https://www.youtube.com/watch?v=ewW6_baBXko)
- 📅 [Chain React 講者徵集開放至 2024/5/3](https://sessionize.com/chain-react-2024/)
- 📅 [React Universe Conf 2024 - 早鳥優惠今日截止](https://ti.to/RUC/react-universe-conf-2024)

---

## 🔀 其他 {#other}

- 💬 [TypeScript 5.5 迭代計劃 - 新增 Set 方法、配置擴展合併](https://github.com/microsoft/TypeScript/issues/57475)
- 📜 [TypeScript 實戰技巧 - 類型斷言的隱藏面向](https://effectivetypescript.com/2024/02/27/type-guards/)
- 📜 [Deno - 推出 JSR - JavaScript 套件註冊表](https://deno.com/blog/jsr_open_beta)
- 📜 [OpenJS 啟動新合作計劃以改善 JavaScript 套件元數據的互通性](https://socket.dev/blog/openjs-improve-interoperability-of-javascript-package-metadata)
- 📜 [開放網路倡議 - Apple 暫停封殺網頁應用程式，但抗爭持續](https://open-web-advocacy.org/blog/apple-backs-off-killing-web-apps/)
- 📜 [Node.js 中最新 V8 引擎的八大更新](https://blog.appsignal.com/2024/02/28/top-8-recent-v8-in-node-updates.html)
- 📦 [Safari 17.44 的 WebKit 功能 - CSS @scope, align-content](https://webkit.org/blog/15063/webkit-features-in-safari-17-4/)
- 📦 [Shiki-magic-move - 流暢動畫程式碼區塊](https://github.com/shikijs/shiki-magic-move)
- 📦 [Parcel 2.12 - 透過導入屬性定義的建置期巨集](https://parceljs.org/blog/v2-12-0/)
- 📦 [Playwright 1.42 - 測試標記、跳過測試註解](https://github.com/microsoft/playwright/releases/tag/v1.42.0)

---

## 🤭 趣聞 {#fun}

[![alt](/emails/issues/176/meme.jpg)](https://twitter.com/sebastienlorber/status/1765373471645737153)

下次見！👋