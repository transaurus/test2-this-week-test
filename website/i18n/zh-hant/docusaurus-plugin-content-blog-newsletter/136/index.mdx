---
slug: /136
title: "This Week In React #136: Next.js, Signals, Bling, Suspense, Server Components, useSyncExternalStore, Expo, Reanimated, Metro..."
authors: [slorber]
date: 02-28-2023
---

大家好！

本週，關於信號模型的辯論仍在繼續。我們還看到 Next.js 的出色發佈，推出了一個新的快取系統，以促進在無伺服器 Edge 運行時中高效使用伺服器元件。

React Native 方面也有大量動態，包括 Expo 48、Expo Router 1.0、Expo Image 1.0、Reanimated 3.0 的發佈，以及 Metro 開始支援符號連結！

<!-- truncate -->

**💡 [在 Twitter 上查看本通訊](https://slo.im/thread) - 視覺格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 贊助商 {#sponsor1}

[![Suncel](/emails/issues/136/suncel.jpg)](https://suncel.io/)

**[打造可複用區塊 · 更快發佈內容 · 獲得更佳核心網站指標與 SEO](https://suncel.io/)**

**內容編輯者**：對於需要產出大量內容並具備強大 SEO 策略的企業而言，這將是遊戲規則改變者。行銷人員和內容編輯者可以在無複雜操作的情況下編輯和發佈頁面。消除長時間延遲，實現即時發佈。透過 Next.js 優化頁面和圖片，達成完美的核心網站指標分數。

**開發者**：可與現有 Next.js 應用程式即插即用。使用 Suncel CMS 對開發者有多項優勢：

- 使用 React 構建可複用區塊
- SEO Meta 和網站地圖自動生成（透過我們的 SEO 模組）
- 使用 React 創建自定義設置
- 管理界面可透過 React 自定義
- 無需為適應 CMS 設計路由系統

**[訪問 Suncel.io](https://suncel.io/)** | **[5 分鐘演示影片](https://www.youtube.com/watch?v=LUupLEZKp3w)**

---

## ⚛️ React {#react}

[![Next.js 13.2](/emails/issues/136/nextjs13.2.jpg)](https://nextjs.org/blog/next-13-2)

**[Next.js 13.2](https://nextjs.org/blog/next-13-2)**

此次重大更新包含 Vercel 開發者預先展示的多項新功能。全新 Metadata API 對 SEO 非常實用，能完美配合 SSR 串流、伺服器元件和新的 app 目錄結構。新版 Route Handlers 具備出色的可用性：支援同位置部署，只需導出 HTTP 動詞即可。特別令人期待的是 MDX 相關新功能（Rust 編譯器、伺服器元件），這將使 Next.js 內容網站更輕量且高效。據了解，Next.js 開始使用 TypeScript 代碼生成步驟來實現類型化連結（作為 TypeScript 外掛的補充）。Turbopack 對 Webpack 加載器的兼容性將使新打包工具的採用更加容易。

The biggest surprise for me is the introduction of a cache API directly integrated to `fetch()`: allows a bit the same thing as ISR but with a finer granularity, at the component level, for each request. There is even a tagging system. Next.js remains portable: the cache can be hosted on your own infrastructure, or use a local LRU cache. Of course, this is optimized for deploying on Vercel. A dedicated article gives more details and explains the limits of the ISR model: [Vercel Cache API: A progressive cache, integrated with Next.js](https://vercel.com/blog/vercel-cache-api-nextjs-cache). See also the [thread of Sebastian Markbåge](https://twitter.com/sebmarkbage/status/1628845420121128965).

---

[![JavaScript 中訊號的演變](/emails/issues/136/signals.jpg)](https://dev.to/this-is-learning/the-evolution-of-signals-in-javascript-8ob)

**[JavaScript 中訊號的演變](https://dev.to/this-is-learning/the-evolution-of-signals-in-javascript-8ob)**

這篇由 Ryan Carniato (SolidJS) 撰寫的文章追溯了前端領域中訊號模型的發展歷程，從 KnockoutJS、MobX 到許多其他解決方案。

訊號模型仍是本週熱議焦點。建議您親自閱讀 Twitter 上的相關討論：

- Andrew Clark [闡明立場](https://twitter.com/acdlite/status/1628811935088013314)並[對在 React 引入訊號持開放態度](https://twitter.com/acdlite/status/1626590880126889984)。React Forget 編譯器[可能編譯為訊號模式](https://twitter.com/acdlite/status/1628930249718202369)。
- Miško Hevery [解釋](https://twitter.com/mhevery/status/1628556944318550016)訊號如何避免屬性鑽取(prop drilling)的性能問題。
- Evan You [傾向](https://twitter.com/youyuxi/status/1629636673519894528)可理解的 mutable 模型而非會洩漏的 immutable 模型。
- Devon Govett [提醒](https://twitter.com/devongovett/status/1629540226589663233)採用「單向資料流」的原因，並指出訊號模型的潛在問題。
- Jordan Walke [提及](https://twitter.com/jordwalke/status/1629663133039214593) React 創建時曾考慮反應式模型，但因改變語言語義而棄用。
- Dan Abramov [解釋](https://twitter.com/dan_abramov/status/1629872956288512007)使用者期望相同資料呈現相同介面，並[說明](https://twitter.com/dan_abramov/status/1629539600489119744)使用「原始值」(未封裝值)的優勢。
- [我的立場](https://twitter.com/sebastienlorber/status/1630264713845039104)：大體認同 React 團隊觀點，認為應在現有模型持續創新，儘管訊號短期更具吸引力。期待 JavaScript 未來更好支援 immutable 模型，且 React Forget 編譯器僅是過渡方案。

---

- 👥 [Matt Carroll](https://twitter.com/mattcarrollcode) + [Sean Keegan](https://twitter.com/DevRelSean): 兩位開發者關係工程師最近加入了 React 團隊。
- 📜 [Module Extraction: The Silent Web Revolution](https://www.builder.io/blog/module-extraction-the-silent-web-revolution): React 框架已經可以在同一模組中分離客戶端/伺服器程式碼。但像 Qwik 這樣的框架更進一步，甚至可以提取閉包（包括捕獲的變數）。我們來看看這個想法在大型應用中是否能夠良好擴展。
- 📜 [Why useEffect May Not Be the Best Abstraction](https://www.builder.io/blog/useeffect-not-the-best-abstraction): 對 useEffect 的批評以及與 Qwik 程式碼的比較。
- 📜 [i18n translations in Next.js 13's app-dir for server/client components](https://aralroca.com/blog/i18n-translations-nextjs-13-app-dir): Next-translate 的作者解釋了在發布其函式庫 v2 版本時遇到的與伺服器元件相關的一些困難，但也報告了一些有趣的優勢，例如減少了 js 套件大小。
- 📜 [React Is Holding Me Hostage](https://emnudge.dev/blog/react-hostage): 一篇相當公正地批評 React 的文章，讚揚了 signals 和更具反應性的模型的優點。
- 📜 [useSyncExternalStore - First Look](https://julesblom.com/writing/usesyncexternalstore): 這個 hook 比看起來更有用，不要錯過！
- 📜 [Owncast v0.1.0 Retrospective - Frontend Web Rewrite](https://gabekangas.com/blog/2023/02/owncast-v0.1.0-retrospective-frontend-web-rewrite/): 從 Preact 切換到 React/Next.js 的反饋，包括一個有趣的社會成果（更多貢獻者）。
- 📜 [How to avoid tricky async state manager pitfalls in React](https://evilmartians.com/chronicles/how-to-avoid-tricky-async-state-manager-pitfalls-react)
- 📜 [React Libraries for 2023](https://www.robinwieruch.de/react-libraries/)
- 📜 [Storybook 7 Docs](https://storybook.js.org/blog/storybook-7-docs/)
- 📦 [Suspense](https://github.com/bvaughn/suspense/): React Suspense 的工具箱，Brian Vaughn 的新專案。
- 📦 [TanStack Bling](https://github.com/TanStack/bling/): TanStack 的新框架無關專案，下一個 TanStack Start 元框架將基於此。
- 📦 [Forgetti](https://github.com/lxsmnsyc/forgetti): 一位開發者不想等待 React Forget 編譯器，因此他開發了自己的編譯器。
- 📦 [TanStack Query v5.0.0-alpha.0](https://twitter.com/TkDodo/status/1630159547405877249): 即將推出的 v5 改進預覽：無限查詢、樂觀更新、套件大小...
- 📦 [Tinasaurus - Edit your Docusaurus site with TinaCMS](https://tina.io/blog/tinasaurus-docusaurus-starter/): 與 Docusaurus 整合良好的 CMS，允許使用 MDX 元件。
- 📦 [Sonner - an opinionated toast component for React](https://twitter.com/emilkowalski_/status/1628742238548250624)
- 📦 [nodl - framework for visual node graphs](https://twitter.com/emilwidlund/status/1628877076424949760)
- 📦 [React Aria - February 2023 releases](https://twitter.com/devongovett/status/1629156091178131457)
- 📦 [Radix UI releases](https://twitter.com/radix_ui/status/1629120708054753281)
- 💬 [Chat about the future for stitches](https://github.com/stitchesjs/stitches/issues/1144)
- 🎙️ [Reactiflux Podcast - Behind the React Documentary with Ida Bechtle and Christopher Chedeau](https://anchor.fm/reactiflux)
- 🎥 [Signals For Solid, Qwik And React](https://www.youtube.com/watch?v=ZLMjJL70glE)

<SubscribeFormEmbed />

---

## 💸 贊助商 {#sponsor2}

**[![建置並運行可擴展的綜合監控方案](/emails/issues/134/checkly.jpg)](https://www.checklyhq.com/product/monitoring-as-code/?utm_medium=email&utm_source=newsletter&utm_campaign=this-week-in-react)**

**[建置並運行可擴展的綜合監控方案](https://www.checklyhq.com/product/monitoring-as-code/?utm_medium=email&utm_source=newsletter&utm_campaign=this-week-in-react)**

你建構它；你擁有它！這個簡單的箴言驅動軟體開發多年。但如何以最佳方式監控複雜的 React 應用程式？

- 第一：使用 Playwright 模擬用戶流程，確保應用程式正常運作
- 第二：確信使用的 API 處於運行狀態

「監控即代碼」——一種從代碼直接定義、測試和部署整個應用監控的新方法

- 編寫監控設置並保存在版本控制中
- 在預覽環境測試應用程式，避免錯誤和功能退化
- 部署測試並開始監控生產環境

[免費將監控整合至您的代碼工作流](https://www.checklyhq.com/product/monitoring-as-code/?utm_medium=email&utm_source=newsletter&utm_campaign=this-week-in-react)

## 📱 React-Native {#react-native}

[![Expo 48](/emails/issues/136/expo48.jpg)](https://blog.expo.dev/expo-sdk-48-ccb8302e231)

**[Expo 48](https://blog.expo.dev/expo-sdk-48-ccb8302e231)**

重要版本。包含先前測試版中的亮點功能：

- React Native 0.71.3 - React 18.2.0
- 來自 React-Native 的 Yoga 改進（Flexbox）
- 預設啟用 M1 晶片的 EAS 建構器
- 預設啟用 Hermes 引擎
- 所有 Expo 模組支援 Fabric（實驗性）

自測試版以來的更新：

- Expo Image 1.0 穩定版發布
- Expo Router 1.0 穩定版發布（[專文說明](https://blog.expo.dev/announcing-expo-router-v1-1d97d7833605)）

---

[![Reanimated 3.0](/emails/issues/136/reanimated3.jpg)](https://blog.swmansion.com/releasing-reanimated-3-0-17fab4cb2394)

**[Reanimated 3.0](https://blog.swmansion.com/releasing-reanimated-3-0-17fab4cb2394)**

Reanimated 3.0 已發布穩定版，新增共享元素轉場功能（[展示](https://twitter.com/swmansion/status/1630590156255240193)）。現可在行內樣式中使用共享變數。該庫經過重寫以提升效能、開發體驗，並為新功能做好準備。相容 Fabric 和 Reanimated 2 API 以簡化升級，但移除了 Reanimated 1 API。

---

- 📜 [React Native App Clip：新功能與應用大小縮減](https://bndkt.com/blog/2023/react-native-app-clip-new-capabilities)
- 💬 [RFC：在 package.json 引入 reactNativeMetadata](https://github.com/react-native-community/discussions-and-proposals/pull/588)：提議在 `package.json` 中添加元數據，適用於多種場景（應用程式與函式庫）。
- 💬 [RFC：惰性打包](https://github.com/react-native-community/discussions-and-proposals/pull/605)：透過動態導入加速大型應用程式的開發啟動。
- 📦 [Metro 0.75.1](https://twitter.com/robjhogan/status/1628460899714449416)：實驗性支援符號連結與 `package.json` 的 "exports"！
- 📦 [Restyle 2.4](https://github.com/Shopify/restyle/pull/220)：Shopify 樣式函式庫的多項效能改進。
- 📦 [Dank Style (alpha)](https://dank.style/)：適用於 Next.js 和 React-Native 的全新通用樣式函式庫。
- 👀 [Expo + React-Native 伺服器元件示範](https://twitter.com/Baconbrix/status/1629909713910480898)：我討論此議題已有一段時間，而 Evan Bacon 剛剛發布了首個展示可行性的示範！
- 👀 [BottomSheet - 網頁支援](https://twitter.com/gorhom/status/1627399052068282368)：PR 已合併，將於 v5 版本推出。
- ⚠️ [Fastlane - 立即更新以避免 Apple ID 帳戶遭鎖定](https://twitter.com/FastlaneTools/status/1629153901747265538)
- 🎙️ [The React Native Show, Coffee Talk #8 - React Native 現狀](https://www.youtube.com/watch?v=jwfsMzLY5Cs)
- 🎥 [React Native 中使用 three.js 的 3D 動畫入門指南](https://www.youtube.com/watch?v=5WNoynmnEAs)
- 🎥 [如何使用原生模組建置 Expo 函式庫](https://www.youtube.com/watch?v=ZNE7Of3TZAY)

---

## 🧑‍💻 工作機會 {#jobs}

🧑‍💼 [**Passionfroot - 資深全端工程師 (Remix) - €160k+，柏林/遠端**](https://passionfroot.recruitee.com/o/senior-fullstack-engineer)

Passionfroot 的使命是透過 YouTube、Podcast、社群媒體和電子報賦能未來的獨立事業。加入我們，共同打造能讓全球創作者建立可擴展、可持續事業的工具。

🧑‍💼 [**Callstack - 資深 React Native 開發者 - 全遠端，B2B 月薪淨額 PLN 21-32k**](https://www.callstack.com/senior-react-native-developer)

您想參與開發全球最熱門的應用程式嗎？您希望共同打造 React Native 技術嗎？加入 React & React Native 領導團隊 Callstack。詳情請見官網，我們期待您的申請－展現您的實力！

🧑‍💼 [**G2i - 100% 遠端 React Native 職缺**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

我們有多個 React Native 開發者職缺！年薪約 16 萬美元外加 10% 獎金。需具備 RN 實際開發經驗且位於美國。私訊 [@gabe_g2i](https://twitter.com/gabe_g2i) 了解詳情，並請註明來自 This Week in React。

💡 [如何發布職缺？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

- [Babel 7.21](https://babeljs.io/blog/2023/02/20/7.21.0)：支援 TypeScript 5.0 + 裝飾器
- [Angular v16.0.0-next.0](https://twitter.com/Enea_Jahollari/status/1628515124347654144)：訊號機制
- [Deno 1.31](https://twitter.com/deno_land/status/1629123230492463106)
- [Vitest 0.29](https://twitter.com/sheremet_va/status/1629403679898972161)
- [Turborepo 1.8](https://twitter.com/turborepo/status/1628497786881597444)
- [Mock Service Worker 1.1](https://twitter.com/ApiMocking/status/1628909915111579650)
- [Bun 文件已上線](https://twitter.com/colinhacks/status/1629310598004772865)
- [SpiderMonkey - JavaScript 導入映射功能介紹](https://spidermonkey.dev/blog/2023/02/23/javascript-import-maps-part-1-introduction.html)
- [Ezno 現已開源](https://twitter.com/kaleidawave/status/1629885949353009156)
- [樣式查詢功能入門指南](https://developer.chrome.com/blog/style-queries/)
- [Chrome 無頭模式大幅升級！](https://developer.chrome.com/articles/new-headless/)
- [Safari Technology Preview 164](https://webkit.org/blog/13902/release-notes-for-safari-technology-preview-164/)
- [動手打造能竊取一切的 Chrome 擴充功能](https://mattfrisbie.substack.com/p/spy-chrome-extension)

---

## 🤭 趣味專區 {#fun}

[![迷因圖](/emails/issues/136/meme.jpg)](https://twitter.com/trashh_dev/status/1629883957121781760)

下次見！ 👋