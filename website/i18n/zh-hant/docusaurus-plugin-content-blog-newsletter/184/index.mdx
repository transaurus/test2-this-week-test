---
slug: /184
title: "This Week In React #184: Patching, Expo, React Aria, Headless UI, Strict Mode, DevTools, Next.js, Mitosis, Twofold, Terminosaurus, Docusaurus, MST, Remix-SaaS, VisionCamera, Reanimated, VisionOS, Apollo, Vite, Node, Hono ..."
authors: [slorber, bndkt]
date: 05-08-2024
---

大家好！

我們在短暫休息後回來了，涵蓋了兩週的新聞！

希望你已經從 React 19 測試版發布中恢復過來 😄 但這還沒結束，我們即將進入一個令人興奮的時期，React Conf、Vercel Ship、App.js 以及許多其他會議即將來臨。

本週，React 修補全域變數成為生態系統中的熱門話題。我們還有一些有趣的 React 相關發布，包括兩個主要的 headless 函式庫。

如預期，Expo SDK 51 已經發布，現在似乎是嘗試新架構的好時機。

在尋找一個很棒的 React 暑期會議嗎？[React Rally](https://reactrally.com/?utm_source=thisweekinreact) 門票現正發售中（8 月 12-13 日，🇺🇸 猶他州）。我們的讀者使用代碼 "TWIR" 可獲得 [10% 折扣](https://ti.to/react-rally/react-rally-2024/discount/TWIR)。

說到折扣，Josh Comeau 也為他的旗艦課程 [The Joy of React](https://www.joyofreact.com/) 提供了一個。除了已有的折扣外，我們的讀者使用代碼 "TWIR" 還可獲得 [額外 10% 折扣](https://courses.joshwcomeau.com/checkout/joy-of-react/ultimate?couponCode=TWIR)！

<!-- truncate -->

**💡 [在 Twitter 上查看本通訊](https://slo.im/thread) - 視覺格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 贊助商 {#sponsor1}

[![幫助工程師發揮產品肌肉](/emails/issues/183/posthog.jpg)](https://newsletter.posthog.com/?utm_source=twir&utm_campaign=twir)

**[幫助工程師發揮產品肌肉](https://newsletter.posthog.com/?utm_source=twir&utm_campaign=twir)**

[**工程師的產品指南**](https://newsletter.posthog.com/?utm_source=twir&utm_campaign=twir) 是 PostHog 的通訊，致力於幫助工程師提升產品技能。學習該問用戶什麼問題、如何建立用戶喜愛的新功能，以及達成產品市場契合度的路徑。

[**免費訂閱**](https://newsletter.posthog.com/?utm_source=twir&utm_campaign=twir)，以獲取關於打造優秀產品的精選建議、從建立 PostHog 中學到的教訓（和錯誤），以及對頂尖初創公司策略的深入探討。

---

## ⚛️ React {#react}

[![React Aria 發布，5 月 1 日](/emails/issues/184/reactaria.jpg)](https://react-spectrum.adobe.com/releases/2024-05-01.html)

[**React Aria 發布，5 月 1 日**](https://react-spectrum.adobe.com/releases/2024-05-01.html)

Adobe 工程師最近對他們的無樣式、可存取的 React 組件庫進行了許多改進。重點包括：

- 子選單，請參閱[專用部落格文章](https://react-spectrum.adobe.com/blog/creating-a-pointer-friendly-submenu-experience.html)
- 7 個新的顏色選擇器組件
- TreeView alpha
- DropZone + FileTrigger
- 類型化的客戶端路由集成
- onAction/isDisabled 項目 API
- 更好的 tree shaking（約小 4 倍）

---

[![Headless UI v2.0 for React](/emails/issues/184/headlessui.jpg)](https://tailwindcss.com/blog/headless-ui-v2)

[**Headless UI v2.0 for React**](https://tailwindcss.com/blog/headless-ui-v2)

Tailwind 團隊為其無樣式、具無障礙功能的 React 元件庫發布了重大升級，重點更新包括：

- 內建錨點定位功能（採用 Floating UI）
- 新增表單元素元件：Checkbox、Input、Label、Field
- 使用 TanStack Virtual 實現 Combobox 列表虛擬化
- 透過 React Aria 實現懸停/聚焦/啟用狀態的數據屬性
- 全新文件網站

---

- 💸 [React Universe Conf - Previously React Native EU. Experts from React & React Native under one roof! Use code RUCxTWIR to get a 10% discount.](https://www.reactuniverseconf.com/tickets-2024?utm_campaign=React_Universe_Conf&utm_source=email&utm_content=This_Week_in_React)
- 💬 [Why doesn't Next.js expose the request and response objects in Layouts?](https://github.com/vercel/next.js/issues/43704#issuecomment-2090798307): Delba explains exposing more APIs would prevent Next.js from optimizing code in the future (notably through Partial Prerendering), and gives us alternatives. This [workaround](https://www.propelauth.com/post/getting-url-in-next-server-components) made me smile: putting request data in a header through a middleware to be able to access it.
- 💬 [Vite RFC - Environment API](https://github.com/vitejs/vite/discussions/16358): This upcoming Vite 6 feature should help support React Server Components in Vite. This could also make Vite a viable choice for React Native, which needs to handle one module graph per native platform.
- 👀 [React DevTools 5.2 PR](https://github.com/facebook/react/pull/29022): components optimized by the React Compiler will show a “✨ Memo” badge, including in the profiler. We can now debug/inspect useFormStatus. There is also work around “Fusebox”, a new codename for React Native DevTools.
- 👀 [Next.js PR - Support React 19 in App and Pages router](https://github.com/vercel/next.js/pull/65058)
- 👀 [React Core PR - Support useFormStatus in progressively-enhanced forms](https://github.com/facebook/react/pull/29019)
- 🐦 [React might patch the Date API to avoid hydration mismatch](https://x.com/acdlite/status/1785691330988986587)
- 🐦 [React 19 will "fire" refs twice under StrictMode](https://twitter.com/sebastienlorber/status/1787814604170485770)
- 🐦 [React 19 beta - Rick Hanlon’s Ask Me Anything](https://twitter.com/rickhanlonii/status/1783906285957587194)
- 🔗 [Remix for Next.js Developers](https://remixfornextdevs.com): Convenient resource with side-by-side code snippets.
- 🗓 [React Summit](https://reactsummit.com/?utm_source=thisweekinreact) - 🇳🇱 Amsterdam - 14-18 June - Get a 10% discount with code "TWIR".
- 🗓 [dotJS](https://www.dotjs.io/?utm_source=thisweekinreact) - 🇫🇷 Paris - June 27 - Less than 2 months before the conference, the speaker line-up is announced! 10% discount with code "TWIR"
- 📜 [Why Patching Globals Is Harmful](https://kettanaito.com/blog/why-patching-globals-is-harmful): An interesting read related to the bad practice of patching globals, taking React, Next.js, and Bun as examples. I agree that explicitly imported APIs are better, but it wouldn’t allow React to dedupe RSC fetch requests from third-party npm SDKs.
- 📜 [Modern React testing - Playwright](https://sapegin.me/blog/react-testing-5-playwright/): A great resource to start implementing E2E React tests in your apps, using Playwright, Mock Service Worker, and React Testing Library.
- 📜 [React Strict Mode and Race Condition](https://www.nico.fyi/blog/react-strict-mode-and-race-condition): Highlights a subtle behavior you might encounter if you cancel requests in useEffect with AbortController.
- 📜 [Getting Started with Mitosis - Creating a Cross-Framework Design System](https://www.builder.io/blog/mitosis-get-started): Mitosis allows you to compile a JSX component to React/RN/Angular/Vue/Svelte. It also has a brand new website.
- 📜 [Locality of Behavior in React Components](https://alexkondov.com/locality-of-behavior-react/): Reflection around abstracting vs inlining code in a React component. Things that change together should live together.
- 📜 [How to make edge rendering fast](https://developers.netlify.com/guides/how-to-make-edge-rendering-fast/): Netlify’s CEO takes an edge-rendered Remix app and explains how introducing an extra serverless function + CDN caching could speed up your app.
- 📜 [Combining Pixi-React and HTML with Tunnels](https://jallen.dev/blog/pixi-react-tunnels): When using multiple React renderers, a tunnel library might help you keep things grouped by concern.
- 📜 [Upcoming custom element support in React](https://piccalil.li/blog/upcoming-custom-element-support-in-react/): React 19 beta passes 100% of the Custom Elements Everywhere benchmark. Combining React with custom elements looks like an interesting choice in the future.
- 📜 [Replace Your HTML Entry Point with React](https://danielnagy.me/posts/Post_2mewtbsl6g4c): Uses React to render the entire document in Vite. It’s not so simple, but this can be useful for SSR streaming support.
- 📜 [10 Features Next.js 15 Could Launch](https://notebook.lachlanjc.com/2024-04-17_10_features_nextjs_15_could_launch): Predict possible announcements at Vercel Ship conf.
- 📜 [Nuances of Server Actions in Next.js](https://tigerabrodi.blog/nuances-of-server-actions-in-nextjs)
- 📦 [React Router 6.23 - Data Strategy API (unstable)](https://github.com/remix-run/react-router/blob/main/CHANGELOG.md#v6230): Enables new Remix 2.9 Single Fetch feature, firing one request for all loaders instead of one per loader.
- 📦 [Terminosaurus - Graphical UI library for terminals, including React renderer integration](https://mael.dev/terminosaurus/)
- 📦 [Twofold - Framework for building demos with React Server Components](https://twofoldframework.com/)
- 📦 [Mobx-State-Tree 6.0 - hasEnv, TypeScript, perf improvements](https://github.com/mobxjs/mobx-state-tree/discussions/2180)
- 📦 [Zustand-Valtio - Interesting alternative to Zustand + Immer](https://github.com/zustandjs/zustand-valtio)
- 📦 [Hono 4.3 - Hono JSX improves compatibility with React, can render Radix UI primitives](https://github.com/honojs/hono/releases/tag/v4.3.0)
- 📦 [Docusaurus 3.3 - Handle React 18.3 warnings, createSitemapItems, pages plugin improvements](https://docusaurus.io/blog/releases/3.3)
- 📦 [Apollo Client 3.10 - Schema-based testing utilities, client.watchFragment, stable createQueryPreloader](https://www.apollographql.com/blog/whats-new-in-apollo-client-3-10)
- 📦 [use-context-selector 2.0 - Drops React < 18](https://github.com/dai-shi/use-context-selector)
- 📦 [Remix-SaaS - A free, lightweight, production-ready Remix Stack for your next SaaS app](https://github.com/dev-xo/remix-saas)
- 🎥 [Theo - React's New Controversial Override](https://www.youtube.com/watch?v=PAf6NjyCnrI)
- 🎙️ [This Month in React - React 19 beta, Node 22, Expo 51, RN 0.74, Next.js 14.2 …](https://podcasters.spotify.com/pod/show/reactiflux/episodes/TMiR-2024-05-So-many-new-releases--React-19-featureset-e2jbc64)

<SubscribeFormEmbed placement="middle" />

---

## 💸 贊助商 {#sponsor2}

[![Omlet — React 元件分析工具新選擇](/emails/issues/180/omletad.jpg)](https://omlet.dev/?utm_campaign=partner_this-week-in-react_newsletter-second-sponsor-may-2024)

**[Omlet — React 元件分析工具新選擇 🔎](https://omlet.dev/?utm_campaign=partner_this-week-in-react_second-sponsor-may-2024)**

客製化元件過多且陳舊，元件重用率不足？Omlet 能解決這些問題。Omlet 掃描您的程式碼庫後，即時提供預建與自訂圖表，展示：

- 需移除的未使用與棄用元件
- 待整合的相似或冗餘元件
- 反映新興模式的近期新增元件
- 元件依賴關係，助您評估程式碼更新的影響範圍

透過這些數據，您無需再猜測哪些元件該保留、移除或優化，從而維護更健康的程式碼庫與精簡的元件庫。[立即免費試用 Omlet 30 天](https://omlet.dev/?utm_campaign=partner_this-week-in-react_second-sponsor-may-2024)。

---

## 📱 React-Native {#react-native}

本節由 [Benedikt](https://twitter.com/bndkt) 撰寫。

[![Expo SDK 51](/emails/issues/184/expo51.jpg)](https://expo.dev/changelog/2024/05-07-sdk-51)

[**Expo SDK 51**](https://expo.dev/changelog/2024/05-07-sdk-51)

緊接 React Native 0.74 發布後，Expo SDK 51 正式推出。此版本主要推進內部架構升級，並將先前實驗性套件提升為預設選項。以下簡要列出本通訊已涵蓋的主題：多數 Expo 模組已支援新架構（部分[已知問題](https://docs.expo.dev/guides/new-architecture/#known-issues-in-expo-sdk-libraries)仍待解決）、Bridgeless 模式支援、Apple 隱私清單支援、相機與 SQLite 套件的「next」版本現為預設選項、指紋辨識結束實驗階段。此外還新增了包含 Apple SF Symbols 庫的 expo-symbols 套件（僅限 iOS）、全新 expo-video 函式庫、Expo Router 3.5 支援 URL 中的 # 片段，以及 EAS Update 改進（如逐步推送更新的網頁介面）。預計在即將舉行的 React Conf 會有 Expo Router 相關重大公告（RSC 👀），敬請期待！另一重要變更是：自版本 51 起，Expo Go 僅支援單一 Expo SDK 版本。此決策完全合理，因能大幅簡化 Expo Go 應用程式的維護工作，且多數情境應使用 Expo Dev Client。

---

- 💸 [PowerSync – 建立具備簡單狀態管理和即時反應性的本地優先應用。對現有架構非侵入式](https://www.powersync.com/?utm_source=newsletter&utm_medium=sponsorship&utm_campaign=this-week-in-react)
- 🐦 [Expo SDK 51 中重寫的 Metro 解析器速度提升高達 6 倍](https://x.com/Baconbrix/status/1785364741751214529)
- 🐦 [透過 Expo 51 beta 無線建置原生 iOS 應用！](https://x.com/Baconbrix/status/1783621369743245363)
- 👀 [EAS Build - 定價更新](https://expo.dev/changelog/2024/05-02-fast-failed-builds-exclusion)：快速失敗的建置（在前 3 分鐘內失敗）現在免費，這點非常令人讚賞！
- 🗓 [App.js Conf](https://appjs.co/?utm_source=thisweekinreact) - 🇵🇱 克拉科夫 - 5 月 22-24 日。使用代碼 "TWIR" 獲得 [10% 折扣](https://ti.to/appjs/2024/discount/TWIR)。
- 📜 [React Native 本地資料庫選項：全面總覽](https://www.powersync.com/blog/react-native-local-database-options)：本地優先技術能實現高效能應用，而解決此問題的新方案不斷湧現。本文概述各種資料庫選項。
- 📜 [React Native Vision Camera x Skia：v4 版新功能](https://www.premieroctet.com/blog/en/react-native-vision-camera-v4-skia)：預測我們將看到 RN Vision Camera 和 Skia 幀處理器帶來的驚人新互動體驗！
- 📜 [React Native 0.74 中的 iPad 懸停效果](https://www.oskarkwasniewski.dev/blog/react-native-ipad-hover-effects)：iPadOS 在輸入裝置（如 Apple Pencil）懸停於 UI 元素時有特殊的高亮顯示方式；本文說明如何在 RN 中實現。
- 📜 [React Native 中的 Rust 模組](https://ospfranco.com/post/2024/05/08/react-native-rust-module-guide/)
- 📦 [Reanimated 3.9 - 螢幕轉場、useScrollViewOffset 現支援 Web、React Native 0.74 與無橋接模式支援、共享元素轉場穩定性提升](https://github.com/software-mansion/react-native-reanimated/releases/tag/3.9.0)
- 📦 [React Native 0.74.1 - 隱私權聲明聚合](https://github.com/facebook/react-native/releases/tag/v0.74.1)
- 📦 [React Native 0.73.8 將隱私權聲明加入範本](https://github.com/facebook/react-native/releases/tag/v0.73.8)
- 📦 [React Native VisionOS 0.74](https://github.com/callstack/react-native-visionos/releases/tag/v0.74.0-visionos)
- 📦 [NativeWindUI - 全新元件庫含免費與付費元件](https://nativewindui.com/)
- 🎥 [Simon Grimm - React Native IDE Beta](https://www.youtube.com/watch?v=eOWxKkHakyY)
- 🎥 [Szymon Rybczak - 使用 Rive 強化動畫效果](https://youtube.com/watch?v=2Mn1a_iAj6g)
- 🎙️ [RNR 296 - NASA 使用 Ignite！？！](https://reactnativeradio.com/episodes/rnr-296-nasa-uses-ignite)
- 🎙️ [Rocket Ship 40 - 從 Next.js 到 React Native 與 Kitze](https://share.transistor.fm/s/47610b15)

---

## 🔀 其他 {#other}

- 👀 [四月 Web 平台新功能 - Popover、Intl.Segmenter、align-content、parseHTMLUnsafe…](https://web.dev/blog/web-platform-04-2024)
- 📜 [2024 年前端開發者/工程師手冊](https://frontendmasters.com/blog/front-end-developer-handbook-2024/)
- 📜 [TypeScript 品牌類型](https://prosopo.io/articles/typescript-branding/)
- 📦 [Node 22.1 - 新增磁碟程式碼快取選項](https://nodejs.org/en/blog/release/v22.1.0?utm_content=291781984&utm_medium=social&utm_source=twitter&hss_channel=tw-91985735)
- 📦 [Node 20.3 - 監視模式現已穩定](https://nodejs.org/en/blog/release/v20.13.0)
- 📦 [Vitest 1.6 - 效能優化、–standalone 標記、Benchmark –compare 標記](https://github.com/vitest-dev/vitest/releases/tag/v1.6.0)
- 📦 [Module Federation 2.0 - 與 Webpack 解耦、支援 Rspack、類型安全](https://module-federation.io/blog/announcement.html)

---

## 🤭 趣聞 {#fun}

[![替代文字](/emails/issues/184/meme.jpg)](https://twitter.com/sebastienlorber/status/1786399152550597114)

下次見！👋