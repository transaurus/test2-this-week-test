---
slug: /142
title: "This Week In React #142: JSX, React-Query, Server Components, Next.js, Million, OpenNext, Ariakit, Expo-Image, React-Three-Fiber, TS 5.1, Node.js 20, WebGPU..."
authors: [slorber]
date: 04-18-2023
---

大家好！

本週，TypeScript 5.1 發布了測試版，包含多項與 JSX 和 React 相關的改進！

React-Query 計劃在 v5 版本中移除查詢回調功能，這個決定引發了爭議。

React-Native 開發者請注意！別錯過 6 月 1 日在巴黎舉辦的 [React-Native-Connection](https://reactnativeconnection.io/)。我參與了議程評審委員會，我們剛[公布了完整講者陣容](https://twitter.com/sebastienlorber/status/1648269027318411264)，包含國際與在地講者。使用代碼 "REACTHEBDO" 可享 10% 折扣。

<!-- truncate -->

**💡 [在 Twitter 查看本週刊](https://slo.im/thread) - 視覺化格式 🎨**

---

import Support from "@site/newsletter/_support.mdx";

<Support />

---

## 💸 贊助商 {#sponsor1}

[![React-admin](/emails/issues/141/react_admin.png)](https://marmelab.com/react-admin/?utm_source=newsletter&utm_term=this-week-in-react)

**[React-admin - B2B 應用開源框架](https://marmelab.com/react-admin/?utm_source=newsletter&utm_term=this-week-in-react)**

正在用 React 開發管理後台嗎？我們有好消息！使用 B2B 應用開源框架 React-admin，可節省數天開發時間！🤩

React-admin 不僅節省寶貴時間，更能提升開發能力！已有超過 20,000 名開發者日常使用並認可其效能。想了解長期使用者的經驗？查看非營利組織 [Caritas 的實證案例](https://marmelab.com/blog/2022/07/07/react-admin-caritas.html)。

加入我們活躍的社群與 [Discord](https://discord.com/invite/jR3D6SdQ) 伺服器，獲取最新更新並得到資深開發者網絡的支援。

還在等什麼？立即免費使用 React-admin 😉，將開發效能推向新高度！🚀

---

## ⚛️ React {#react}

[![TypeScript 5.1 beta](/emails/issues/142/ts5.1.jpg)](https://devblogs.microsoft.com/typescript/announcing-typescript-5-1-beta/)

**[TypeScript 5.1 (測試版) + React](https://devblogs.microsoft.com/typescript/announcing-typescript-5-1-beta/)**

本次重大更新讓 React 能宣告自訂 JSX 類型。React 類型定義已[分叉](https://github.com/DefinitelyTyped/DefinitelyTyped/pull/65126)，計劃盡快採用此功能，同時繼續支援舊版 TypeScript（≤ 5.0）。

盡早採用 TypeScript 5.1+ 有充分理由，主要解鎖以下能力：

- the ability to use a React Server Component `async` in JSX without TypeScript errors or [workaround](https://gist.github.com/cramforce/b5e3f0b103f841d2e5e429b1d5ac4ded).
- the ability to return all valid types for `ReactNode` (string, array, boolean...) without needing a fragment ([details](https://twitter.com/sebastienlorber/status/1648619398259769344)).
- other interesting improvements around JSX: namespaced attributes and linked editing (VSCode).

---

[![刻意破壞 React Query 的 API](/emails/issues/142/rq.jpg)](https://tkdodo.eu/blog/breaking-react-querys-api-on-purpose)

**[刻意破壞 React Query 的 API](https://tkdodo.eu/blog/breaking-react-querys-api-on-purpose)**

React-Query will remove the callbacks (`onSuccess`, `onError`, `onSettled`) from the `useQuery` hook with v5. Dominik explains this choice and suggest alternatives more adapted to common cases, like displaying a toast. A controversial but necessary decision because these APIs were often misused. Note: callbacks are kept for `useMutation`.

---

- 🧵 [Dan Abramov - "good rule of thumb. for any “server components”](https://twitter.com/dan_abramov/status/1647203329854799872): explains the minimum requirements for a proper Server Components implementation, taking full advantage of their potential. Presents the limitations of Qwik and Remix models.
- 👀 [Dan Abramov has a "story to tell" at Remix Conf ("React from Another Dimension")](https://twitter.com/remix_run/status/1646177445454950400)
- 👀 [Next.js ships its own copy of React](https://twitter.com/devongovett/status/1647728887927906304): copy used only when using App Router.
- 👀 [Use Storybook with Rspack](https://twitter.com/rspack_dev/status/1646164228598792196)
- 👀 [WebGPU in React-Three-Fiber demo](https://twitter.com/CantBeFaraz/status/1647811509014216710)
- ⚡ [SpiderMonkey Newsletter (Firefox 112-113)](https://spidermonkey.dev/blog/2023/04/14/newsletter-firefox-112-113.html): "We’re working on improving performance for popular web frameworks such as React".
- 📜 [Animating View Transitions](https://www.patterns.dev/posts/view-transitions): explains how to use the new View Transition API (Chrome 111+) in a React context with Next.js App Router, and in a MPA context. Interesting, but the proposed React integration doesn't look ideal.
- 📜 [An Animated Guide to Reacts Optional Parameters](https://julesblom.com/writing/react-optional-parameters): interactive article that presents some features of React APIs that we use less often.
- 📜 [Next over Remix](https://bradgarropy.com/blog/next-over-remix): feedback from a dev who had planned to switch to Remix, but finally stayed with Next.js.
- 📜 [Building a blog with Next.js 13 and React Server Components](https://maxleiter.com/blog/build-a-blog-with-nextjs-13): uses all the latest Next.js features to create a modern blog.
- 📜 [React forwardRef(): How to Pass Refs to Child Components](https://dmitripavlutin.com/react-forwardref/)
- 📜 [Is React the New WordPress?](https://www.seancdavis.com/posts/is-react-the-new-wordpress/)
- 📜 [Becoming an Astro maintainer](https://www.elian.codes/blog/23-04-12-becoming-an-astro-maintainer/)
- 📜 [Display Warning for Unsaved Form Data on Page Exit](https://claritydev.net/blog/display-warning-for-unsaved-form-data-on-page-exit)
- 📜 [Mastering React: Techniques to Take Your UI to the Next Level](https://blog.bitsrc.io/mastering-react-techniques-to-take-your-ui-to-the-next-level-a5002173904f)
- 📜 [What's new in the new Storybook](https://www.mariasimo.codes/storybook-7-new-release)
- 📜 [Full-stack Web Apps Without React](https://remotesynthesis.com/blog/full-stack-without-react/)
- 🎥 [Must Know React Portability Patterns](https://www.youtube.com/watch?v=yi8UCnXPu8U): good advices to reduce coupling of your code to a particular framework.
- 🎥 [Maybe Create React App Isn't Dead?](https://www.youtube.com/watch?v=A2kWoKnpy1U)
- 📦 [Ariakit 0.1.0](https://github.com/ariakit/ariakit/releases/tag/%40ariakit%2Freact%400.1.0): new way of managing state based on component stores. Motivations in this [RFC](https://github.com/ariakit/ariakit/issues/1875): less re-renders, becoming framework-agnostic...
- 📦 [Million.js 2.2.1 - Support for hooks and non-primitives](https://twitter.com/aidenybai/status/1646238355427041285). This [thread](https://twitter.com/aidenybai/status/1647005716350406656) gives interesting explanations about the difference between React and Million reconciliation.
- 📦 [OpenNext 1.0](https://github.com/serverless-stack/open-next/releases/tag/v1.0.0): aims to make Next.js more portable thanks to serverless adapter.
- 📦 [Astro 2.3](https://twitter.com/astrodotbuild/status/1646593124997779465)
- 📦 [React-Three-Next - starter updated - App Router support](https://twitter.com/onirenaud/status/1646139899291254786)
- 📦 [React-Three-Fiber AutoFocus DOF](https://github.com/ektogamat/AutoFocusDOF)

<SubscribeFormEmbed />

---

## 💸 贊助商 {#sponsor2}

[![Tina.io 是專為 Markdown 驅動網站設計的無頭 CMS](/emails/issues/140/tinacms.jpg)](https://tina.io/?utm_source=newsletter&utm_term=this-week-in-react)

**[Tina.io 是專為 Markdown 驅動網站設計的無頭 CMS](https://tina.io/?utm_source=newsletter&utm_term=this-week-in-react)**

- 提供 Markdown 文件的編輯介面
- 支援 MDX 元件的 UI 介面
- 支援靜態生成 (SSG) 與伺服器端渲染 (SSR)
- 可選視覺化編輯功能 (即時預覽)
- 使用可重複使用的區塊建構

試用入門網站

- [Docusaurus](https://github.com/tinacms/tinasaurus) (Github)
- [Next.js + Tailwind 搭配視覺化編輯](https://github.com/tinacms/tina-cloud-starter) (Github)

或執行  `npx create-tina-app@latest`  後訪問 `localhost:3000/admin`

觀看 [4 分鐘示範影片](https://www.youtube.com/watch?v=zRkeKSZjlyw)

---

## 📱 React-Native {#react-native}

- 👀 [懸停手勢即將推出 React Native Gesture Handler](https://twitter.com/breskin67/status/1646511002933153794)：未來跨平台 API 支援 iOS、Android 及網頁。
- 👀 [圖片效能演示](https://twitter.com/nightstomp/status/1647231665222176769)：展示在 React Native 應用中使用過大圖片對效能的負面影響。
- 📦 [Expo-Image 1.2.0 - 支援 ThumbHash](https://twitter.com/tsapeta/status/1646875246362861569)
- 📦 [React-Native-Widget-Extension](https://twitter.com/bndkt/status/1648431242025766912)
- 📦 [AnimateReactNative](https://www.animatereactnative.com/)：Catalin Miron 提供逾 100 種動畫效果（付費產品）。
- 🧵 [Expo 文件更新](https://twitter.com/amanhimself/status/1646959895995105281)
- 🧵 [Jamon Holmgren -「想知道從編譯後的 iPhone 應用中提取 API 金鑰有多容易嗎？」](https://twitter.com/jamonholmgren/status/1647305506053320704)
- 🎥 [Song of Bloom -「能用 React Native 實現嗎？」](https://www.youtube.com/watch?v=PfCQEA72ljU)
- 🎥 [基於檔案路由的 React Native 與 Expo Router](https://www.youtube.com/watch?v=RglRiycD0oQ)
- 👥 [React-Native-Connection](https://reactnativeconnection.io/)（巴黎，6月1日）提供 -10% 門票優惠（代碼 "REACTHEBDO"）。
- 👥 [App.js](https://appjs.co/)（克拉科夫，5月10-12日）提供[工作坊 -20% 優惠](https://ti.to/appjs/2023/discount/ThisWeekinReact20)（代碼 "ThisWeekinReact20"）。
- 👥 [Chain React](https://chainreactconf.com/)（波特蘭，5月18-19日）提供 -10% 門票優惠（代碼 "thisweekinreact"）。

---

## 🧑‍💻 職缺 {#jobs}

🧑‍💼 [**Passionfroot - 資深全端工程師 (Remix) - €160k+，柏林/遠端**](https://passionfroot.recruitee.com/o/senior-fullstack-engineer)

Passionfroot 致力透過 YouTube、Podcast、社群媒體和電子報賦能明日獨立事業。加入我們打造全球創作者工具，建立可擴展的永續商業模式。

🧑‍💼 [**Callstack - 資深 React Native 開發者 - 全遠端，月薪21-32k茲羅提淨額 (B2B)**](https://www.callstack.com/senior-react-native-developer)

渴望開發全球熱門應用？想共同塑造 React Native 技術？加入 React & React Native 領導團隊 Callstack。詳情請見官網，期待您的履歷展現實力！

🧑‍💼 [**G2i - 100% 遠端 React Native 職缺**](https://twitter.com/gabe_g2i/status/1563204813881425926?s=20&t=ArRLC77BpRwXXCdx8fnUqw)

招募多名專精 React Native 的開發者！年薪約 $160k 加 10% 獎金。需具 RN 實際開發經驗且位於美國。私訊 [@gabe_g2i](https://twitter.com/gabe_g2i) 時請註明 This Week in React。

💡 [如何發布職缺？](https://thisweekinreact.com/sponsor)

---

## 🔀 其他 {#other}

- [Node.js 20 現已推出](https://openjsf.org/blog/2023/04/18/node-js-20-now-available/)：附帶穩定的測試執行器、權限模型、編譯成可執行二進位檔...
- [pretty-ts-errors](https://github.com/yoavbls/pretty-ts-errors)：提升 VSCode 中 TypeScript 開發者體驗的好點子。
- [total-typescript/shoehorn - TypeScript 中的部分模擬](https://github.com/total-typescript/shoehorn)
- [Chrome 推出 WebGPU](https://developer.chrome.com/blog/webgpu-release/)：在 Chrome 113+ 中推出。
- [WebGPU 基礎](https://webgpufundamentals.org/)
- [Turborepo 1.9](https://twitter.com/turborepo/status/1646238976196444162)

---

## 🤭 趣聞 {#fun}

[![alt](/emails/issues/142/meme.jpg)](https://twitter.com/thekitze/status/1646511070801203202)

再見！👋